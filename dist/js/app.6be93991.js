(function(e){function t(t){for(var n,s,i=t[0],l=t[1],c=t[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var i=a[s];0!==o[i]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},s={app:0},o={app:0},r=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-40b5ffca":"a198a270","chunk-c5dfc98c":"0f071a5c"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-c5dfc98c":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-40b5ffca":"31d6cfe0","chunk-c5dfc98c":"05c024b6"}[e]+".css",o=l.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var c=r[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],u=c.getAttribute("data-href");if(u===n||u===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete s[e],p.parentNode.removeChild(p),a(r)},p.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){s[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=i(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",d.name="ChunkLoadError",d.type=n,d.request=s,a[1](d)}o[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;r.push([4,"chunk-vendors"]),a()})({0:function(e,t){},"00c6":function(e,t,a){},1:function(e,t){},"16fc":function(e,t,a){},"18cb":function(e,t,a){"use strict";a("8c1b")},2:function(e,t){},2415:function(e,t,a){"use strict";a("f653")},"2fc5":function(e,t,a){},3:function(e,t){},"31c2":function(e,t,a){"use strict";a("43cf")},3304:function(e,t,a){},3423:function(e,t,a){"use strict";a("16fc")},"39e6":function(e,t,a){"use strict";a("d19a")},4:function(e,t,a){e.exports=a("56d7")},"43cf":function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id="4678"},5:function(e,t){},5139:function(e,t,a){"use strict";a("f878")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("4de4"),a("498a2");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"locale-changer"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.$i18n.locale,expression:"$i18n.locale"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.$i18n,"locale",t.target.multiple?a:a[0])}}},e._l(e.langs,(function(t,n){return a("option",{key:"Lang"+n,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)]),a("router-view")],1)},o=[],r=(a("b64b"),{en:{App:{name:"Select"},Login:{title:"Administrate Login",sign_in_with_google:"Sign in with Google",login:"Email",password:"Password",submit:"Login",installed_version:"Installed version: {version}",help:"Help"}},kr:{App:{name:"셀렉트 어드민"},Login:{title:"셀렉트 어드민 로그인",sign_in_with_google:"구글 계정으로 로그인",login:"이메일",password:"비밀번호",submit:"로그인",installed_version:"설치형 버전: {version}",help:"도움말"}}}),i=Object.keys(r),l=r,c={data:function(){return{langs:i}}},u=c,d=a("2877"),p=Object(d["a"])(u,s,o,!1,null,null,null),m=p.exports,b=a("b85c"),f=a("1da1"),h=(a("96cf"),a("d81d"),a("99af"),a("8c4f")),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.$store.state.locked?a("div",{attrs:{id:"locked-container"}},[a("div",{staticClass:"body bg-white shadow rounded p-4"},[4e3==e.$store.state.locked?[e._m(0),a("p",{staticClass:"text-muted"},[e._v("로그인이 필요합니다.")]),a("a",{staticClass:"btn btn-success text-white border-success shadow-sm w-100 py-2",attrs:{href:"/login",target:"_blank"}},[e._v("새 창으로 로그인 열기")])]:[e._m(1),a("p",{staticClass:"text-muted"},[e._v("자동으로 로그아웃 되었습니다.")]),a("a",{staticClass:"btn btn-success text-white border-success shadow-sm w-100 py-2",attrs:{href:"/login",target:"_blank"}},[e._v("새 창으로 로그인 열기")])]],2)]):e._e(),e.loaded?a("router-view"):e._e()],1)},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h5",{staticClass:"text-dark"},[a("strong",[e._v("알림")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h5",{staticClass:"text-dark"},[a("strong",[e._v("알림")])])}],g=a("2ef0"),k={name:"Layout",components:{},computed:{teams_by_id:function(){return Object(g["groupBy"])(this.$store.state.session.roles,"team_id")}},data:function(){return{loaded:!1}},mounted:function(){console.log(Object({NODE_ENV:"production",VUE_APP_API_URL:"",VUE_APP_VERSION:"2022-04-06",BASE_URL:"/"})),this.load()},methods:{load:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"/"!=e.$route.path){t.next=8;break}if(null===(a=e.$store.state.session)||void 0===a||!a.id){t.next=7;break}return t.next=5,e.$store.dispatch("config");case 5:t.next=8;break;case 7:e.$router.push({path:"/login"});case 8:e.loaded=!0,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},w=k,y=(a("31c2"),Object(d["a"])(w,_,v,!1,null,"0ff9d9dd",null)),x=y.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container my-4",staticStyle:{"max-width":"480px"}},[a("div",{staticClass:"bg-white shadow-sm p-4 rounded"},[a("h5",{staticClass:"text-secondary text-center mt-1 mb-1",staticStyle:{"letter-spacing":"-0.5px","font-weight":"600"}},[e._v(e._s(e.$t("Login.title")))]),a("a",{staticClass:"btn btn-light border shadow-sm w-100 py-3",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.continue_google.apply(null,arguments)}}},[a("span",{staticClass:"mdi mdi-google me-2 text-primary"}),a("span",[e._v(e._s(e.$t("Login.sign_in_with_google")))]),a("br")]),a("div",{staticClass:"border-top my-4",staticStyle:{opacity:"0.5"}}),a("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[a("strong",{staticClass:"mb-2"},[a("small",[e._v(e._s(e.$t("Login.login")))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],staticClass:"form-control form-control-lg",attrs:{type:"text",autofocus:""},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),a("strong",{staticClass:"mb-2"},[a("small",[e._v(e._s(e.$t("Login.password")))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.pw,expression:"form.pw"}],staticClass:"form-control form-control-lg",attrs:{type:"password"},domProps:{value:e.form.pw},on:{input:function(t){t.target.composing||e.$set(e.form,"pw",t.target.value)}}}),a("button",{staticClass:"btn btn-light border py-2 px-4 mt-1",attrs:{type:"submit"}},[e._v(e._s(e.$t("Login.submit")))])]),a("div",{staticClass:"border-top my-4",staticStyle:{opacity:"0.5"}}),a("footer",{staticClass:"d-flex"},[a("a",{staticClass:"me-auto",attrs:{target:"_blank",href:"https://selectfromuser.com/changelog"}},[e._v(e._s(e.$t("Login.installed_version",{version:e.env.VUE_APP_VERSION}))),a("strong",{directives:[{name:"show",rawName:"v-show",value:e.next_version,expression:"next_version"}],staticClass:"ms-2",staticStyle:{"background-color":"rgb(253, 236, 200)",color:"rgb(64, 44, 27)",padding:"0.25rem","border-radius":"3px","font-weight":"600",border:"solid 1px rgba(0,0,0,0.015)"}},[e._v("새로운 업데이트 "+e._s(e.next_version))])]),a("a",{staticClass:"ms-auto",attrs:{target:"_blank",href:"https://docs.selectfromuser.com"}},[e._v(e._s(e.$t("Login.help")))])])])])])},O=[],C=(a("a15b"),a("ac1f"),a("5319"),a("bc3a")),$=a.n(C),S={name:"Page",props:["page","subpage"],components:{},computed:{current_menu:function(){var e=this;return this.$store.state.config.menus.filter((function(t){return t.path==[e.page,e.subpage].filter(Boolean).join("/")}))[0]||{}},menus:function(){var e=this;return this.current_menu?this.$store.state.config.menus.filter((function(t){return t.group==e.current_menu.group})):[]}},data:function(){return{env:Object({NODE_ENV:"production",VUE_APP_API_URL:"",VUE_APP_VERSION:"2022-04-06",BASE_URL:"/"}),done:!1,form:{email:"test@test.com",code:""},challenge_id:0,next_version:""}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.challenge_id=e.$route.query.challenge_id,e.form.code=e.$route.query.code,e.form.email=e.$route.query.email,document.title="".concat(e.$t("Login.title")," - ").concat(e.$t("App.name")),t.prev=4,t.next=7,e.$store.dispatch("session");case 7:e.$store.state.session.id&&(document.location="/"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),console.log(t.t0);case 13:return e.done=!0,e.load(),t.prev=15,t.next=18,$.a.get("https://trello.com/c/uRIRAmgE/1-latest-ui-version.json");case 18:a=t.sent,n=a.data.desc,s=+String(e.env.VUE_APP_VERSION).replace(/-/g,"")||0,o=+String(n).replace(/-/g,"")||0,console.log(n,s,o),s<o&&(e.next_version=n),t.next=29;break;case 26:t.prev=26,t.t1=t["catch"](15),console.log("failed to load up-to-date version",t.t1);case 29:case"end":return t.stop()}}),t,null,[[4,10],[15,26]])})))()},methods:{load:function(){},continue_google:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,r,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("/api/connect/google");case 3:if(s=t.sent,"ok"==(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)){t.next=6;break}throw new Error((null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"로그인 요청 실패");case 6:o=500,r=670,i=window.top.outerHeight/2+window.top.screenY-r/2,l=window.top.outerWidth/2+window.top.screenX-o/2,window.open(s.data.url,"YSG_GoogleOAuthStep1","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(o,", height=").concat(r,", top=").concat(i,", left=").concat(l)),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),alert(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},login:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/api/auth/authorize",{id:e.form.id,pw:e.form.pw});case 3:if(s=t.sent,console.log(s),"ok"==(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)){t.next=7;break}throw new Error((null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"로그인 실패");case 7:return o=s.data.token,window.localStorage.SELECT2_TOKEN=o,t.next=11,e.$store.dispatch("session");case 11:document.location="/",t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),alert(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()}}},R=S,q=(a("5139"),Object(d["a"])(R,j,O,!1,null,"a74c2040",null)),E=q.exports,P=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},T=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container my-4",staticStyle:{"max-width":"480px"}},[a("div",{staticClass:"bg-white shadow-sm p-4 rounded"},[a("h5",{staticClass:"text-muted text-center mb-3"},[e._v("페이지를 찾을 수 없습니다.")]),a("div",{staticClass:"border-top my-4",staticStyle:{opacity:"0.5"}}),a("footer",{staticClass:"text-center"},[a("a",{staticClass:"me-3",attrs:{target:"_blank",href:"https://selectfromuser.com"}},[e._v("소개")]),a("a",{staticClass:"me-3",attrs:{target:"_blank",href:"https://www.selectfromuser.com/contact"}},[e._v("사전예약신청 또는 문의하기")]),a("a",{staticClass:"me-3",attrs:{target:"_blank",href:"https://docs.selectfromuser.com"}},[e._v("기술지원")])])])])])}],L={name:"Page",props:["page","subpage"],components:{},computed:{},data:function(){return{env:Object({NODE_ENV:"production",VUE_APP_API_URL:"",VUE_APP_VERSION:"2022-04-06",BASE_URL:"/"}),done:!1}}},M=L,D=(a("2415"),Object(d["a"])(M,P,T,!1,null,"b87701bc",null)),A=D.exports,N=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{"max-width":"480px"}},[a("h1",[e._v("로그인 중 ...")])])}],U=a("3835"),z=(a("1276"),a("fb6a"),{name:"Page",mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.hash){t.next=17;break}if(a=e.$route.hash.slice(1).split("="),n=Object(U["a"])(a,2),s=n[0],o=n[1],"result"!=s){t.next=7;break}alert("로그인 실패\n\n".concat(decodeURIComponent(o))),window.close(),t.next=17;break;case 7:if("token"!=s){t.next=15;break}return window.localStorage.SELECT2_TOKEN=decodeURIComponent(o),t.next=11,e.$store.dispatch("session");case 11:window.opener.location.href="/",window.close(),t.next=17;break;case 15:alert("로그인 실패\n\n구글인증 응답결과가 올바르지 않습니다."),window.close();case 17:case"end":return t.stop()}}),t)})))()}}),Y=z,V=(a("18cb"),Object(d["a"])(Y,N,F,!1,null,"8431aa26",null)),B=V.exports,I=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},H=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{"max-width":"480px"}},[a("h1",[e._v("d")])])}],G={name:"Page",mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$route.hash&&(a=e.$route.hash.slice(1).split("="),n=Object(U["a"])(a,2),s=n[0],o=n[1],"result"==s?(alert("연결 실패\n\n".concat(decodeURIComponent(o))),window.close()):"ok"==s?(window.opener.location.reload(),window.close()):(alert("연결 실패\n\n구글인증 응답결과가 올바르지 않습니다."),window.close()));case 1:case"end":return t.stop()}}),t)})))()}},J=G,W=(a("779f"),Object(d["a"])(J,I,H,!1,null,"0347e5c0",null)),K=W.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"/"!=e.$route.path?a("div",[a("div",{staticClass:"bg-white mt-2"},[a("div",{staticClass:"submenu d-flex px-2"},e._l(e.menus,(function(t){return"menu-only"!=t.placement?a("div",{staticClass:"item"},[t.target?[a("a",{attrs:{href:t.path,target:t.target}},[e._v(e._s(t.name)+" "),a("span",[e._v("(링크)")])])]:[a("router-link",{attrs:{to:"/"+t.path}},[e._v(e._s(t.name))])]],2):e._e()})),0),a("div",{staticClass:"page p-2",attrs:{id:"page"}},[e.current_page&&e.current_page.path?a("table-block",{attrs:{blocks:e.current_page.blocks,page:e.current_page,depth:"1",path:e.current_path,admin_domain:e.admin_domain,show_log:e.$store.state.admin.active}}):e._e(),!e.menus.length||"menu-only"!=e.current_menu.placement&&!e.current_page.path?a("div",{staticClass:"p-4"},[a("h1",[e._v("404")]),a("h5",{staticClass:"text-muted mb-3"},[e._v("페이지를 찾을 수 없습니다.")]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.hasHistory,expression:"hasHistory"}],staticClass:"btn btn-light border shadow-sm",attrs:{type:"button",onclick:"history.back()"}},[e._v("뒤로가기")])]):e._e()],1)])]):e._e()},X=[],Z=(a("b0c0"),a("9bce")),ee={name:"Page",props:["page","admin_domain"],components:{TableBlock:Z["default"]},computed:{hasHistory:function(){return history.length>1},current_menu:function(){var e=this;return this.$store.state.config.menus.filter((function(t){return t.path==e.page}))[0]||{}},current_page:function(){var e=this,t=this.$store.state.config.pages.filter((function(t){return t.path==[e.page].filter(Boolean).join("/")}))[0]||{};return t.blocks||(t.blocks=[]),t},current_path:function(){for(var e=null,t=0;t<this.$store.state.config.pages.length;t++){var a=this.$store.state.config.pages[t];if(a.path==this.page){e=t;break}}return null!==e&&"pages.".concat(e)},menus:function(){var e=this;return this.current_menu?this.$store.state.config.menus.filter((function(t){return t.group==e.current_menu.group})):[]}},data:function(){return{cols:[],rows:[],results:{},error:{},current_block:{},count_block_names:0,gsheet_loading:[],http_loading:[]}},mounted:function(){var e,t=this;if(null!==(e=this.current_menu)&&void 0!==e&&e.redirect)return this.$router.replace({path:"/".concat(this.current_menu.redirect)});setTimeout((function(){document.title=t.current_menu.name||t.$store.state.config.title||"셀렉트 어드민"}),100),setTimeout((function(){var e;null===(e=document.querySelector("#page input"))||void 0===e||e.focus()}),300)},methods:{}},te=ee,ae=(a("91dd"),Object(d["a"])(te,Q,X,!1,null,"1812098a",null)),ne=ae.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"bg-dark nav-top d-flex"},[a("router-link",{staticClass:"text-reset",attrs:{to:"/"}},[a("strong",{staticClass:"text-light ms-3"},[e._v(e._s(this.$store.state.config.title||"셀렉트 어드민"))])]),a("div",{staticClass:"ms-auto me-3 menu"},[e.$store.state.is_admin?[a("a",{staticClass:"text-white me-3",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.admin_mode()}}},[e._v("로그표시")])]:e._e(),a("a",{staticClass:"text-white",attrs:{href:"#",title:"클릭하여 로그아웃"},on:{click:function(t){return t.preventDefault(),e.logout.apply(null,arguments)}}},[e._v(e._s(e.$store.state.session.email))])],2)],1),a("div",{staticClass:"nav-left p-2"},[a("div",{staticClass:"pt-2 bg-white"}),e._l(this.$store.state.config.menus,(function(t){return a("div",["divider"==t.type?[a("div",{staticClass:"pt-2 bg-white"}),a("div",{staticClass:"mt-2"}),a("div",{staticClass:"pt-2 bg-white"})]:["tab-only"!=t.placement?a("div",{staticClass:"menu bg-white"},[t.target?[a("a",{staticClass:"px-3 py-2 d-block",attrs:{href:t.path,target:t.target}},[e._v(e._s(t.name)+" "),a("span",{staticClass:"float-end"},[e._v("(링크)")])])]:[a("router-link",{staticClass:"px-3 py-2 d-block",attrs:{to:"/"+t.path}},[e._v(e._s(t.name))])]],2):e._e()]],2)})),a("div",{staticClass:"pt-2 bg-white"})],2),a("div",{staticClass:"page-right"},[this.$store.state.config&&this.$store.state.config.menus?a("router-view",{key:""+e.$route.fullPath}):e._e()],1)])},oe=[],re={name:"AdminLayout",props:["admin_domain"],components:{},computed:{menu_groups:function(){return Object(g["groupBy"])(this.$store.state.config.menus,"group")}},data:function(){return{}},mounted:function(){var e=this;if(setTimeout((function(){document.title=e.$store.state.config.title||"셀렉트 어드민"}),0),console.log(Object({NODE_ENV:"production",VUE_APP_API_URL:"",VUE_APP_VERSION:"2022-04-06",BASE_URL:"/"})),this.load(),this.$store.state.session){var t=this.$store.state.session.roles.filter((function(t){return+t.team_id==+e.admin_domain})),a=t.filter((function(e){return"admin"==e.name||"edit"==e.name}));console.log("admin_roles",a),a.length?this.$store.commit("is_admin",!0):this.$store.commit("is_admin",!1)}},methods:{admin_mode:function(){this.$store.commit("admin",{active:!this.$store.state.admin.active})},load:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},logout:function(){this.$store.dispatch("clear session"),Object({NODE_ENV:"production",VUE_APP_API_URL:"",VUE_APP_VERSION:"2022-04-06",BASE_URL:"/"}).VUE_APP_CF_LOGOUT?document.location="/cdn-cgi/access/logout":document.location="/login"}}},ie=re,le=(a("9d5a"),Object(d["a"])(ie,se,oe,!1,null,"b740a360",null)),ce=le.exports;n["a"].use(h["a"]);var ue=[{path:"/login",component:E},{path:"/login/process",component:B},{path:"/connect/process",component:K},{path:"/",name:"Layout",component:x,meta:{sessionRequired:!0},children:[{path:"",component:ce,props:!0,meta:{setup:["config"]},children:[{path:":page",component:ne,props:!0},{path:":page(.*)",component:ne,props:!0}]}]},{path:":any",component:A,props:!0}],de=new h["a"]({mode:"history",base:"/",routes:ue,scrollBehavior:function(e,t,a){return a||{x:0,y:0}}});de.beforeEach(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,a,n){var s,o,r,i,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("window.__unsaved_changes",window.__unsaved_changes),!window.__unsaved_changes){e.next=7;break}if(confirm("저장하지 않은 내용이 있습니다. 페이지를 이동할까요?")){e.next=6;break}return e.abrupt("return",n(!1));case 6:window.__unsaved_changes=!0;case 7:if(!t.matched.some((function(e){return e.meta.sessionRequired}))){e.next=58;break}return console.log("check signed"),e.prev=9,e.next=12,de.app.$store.dispatch("session");case 12:if(s=e.sent,!0!==s){e.next=51;break}if(o=Object(g["flatten"])(Object(g["compact"])(t.matched.map((function(e){return e.meta.requires_scope_any_of})))),r=o.map((function(e){return"tid:".concat(t.params.team_id,":").concat(e)})),!o.length){e.next=21;break}if(console.log(">>>>",r),0!==Object(g["intersection"])(de.app.$store.state.session.scope,r).length){e.next=21;break}return alert("권한이 없습니다."),e.abrupt("return",n({path:"/teams"}));case 21:if(i=Object(g["flatten"])(Object(g["compact"])(t.matched.map((function(e){return e.meta.setup})))),console.log("setup",Object(g["flatten"])(Object(g["compact"])(t.matched.map((function(e){return e.meta.setup}))))),!i){e.next=48;break}e.prev=24,l=[].concat(i),c=Object(b["a"])(l),e.prev=27,c.s();case 29:if((u=c.n()).done){e.next=35;break}return d=u.value,e.next=33,de.app.$store.dispatch(d,Object.assign({once:!0},t.params));case 33:e.next=29;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e["catch"](27),c.e(e.t0);case 40:return e.prev=40,c.f(),e.finish(40);case 43:e.next=48;break;case 45:e.prev=45,e.t1=e["catch"](24),console.log("router meta setup failed: ",e.t1.stack);case 48:return e.abrupt("return",n());case 51:de.app.$store.commit("locked",4e3);case 52:e.next=58;break;case 54:e.prev=54,e.t2=e["catch"](9),console.log("router session validate:",e.t2.message),de.app.$store.commit("locked",4e3);case 58:n();case 59:case"end":return e.stop()}}),e,null,[[9,54],[24,45],[27,37,40,43]])})));return function(t,a,n){return e.apply(this,arguments)}}());var pe=de,me=a("8a39"),be=a("1ddb"),fe=a("688d"),he=(a("3304"),a("2fc5"),$.a.create({withCredentials:!1,timeout:3e4,baseURL:"",headers:{}}));he.interceptors.response.use((function(e){return e}),(function(e){return e}));var _e=he,ve=a("2f62"),ge=a("ade3"),ke=a("5530"),we=a("2909"),ye=(a("d3b7"),a("caad"),a("2532"),a("82dc")),xe=function(e){return new Promise((function(t){return setTimeout(t,e)}))},je={state:{session:{},config:{},config_resources_kv:{},admin:{},teams:[],teams_by_id:{},tables:{},table_info_kv:{},teamrows_kv:{},menu:{},locked:!1,is_admin:!1},mutations:{session:function(e,t){console.log("session loaded"),e.session=t},config:function(e,t){console.log("config loaded"),e.config=t},config_resources_kv:function(e,t){console.log("config_resources_kv loaded"),e.config_resources_kv=t},admin:function(e,t){console.log("admin loaded"),e.admin=t},teams:function(e,t){console.log("teams loaded"),e.teams=Object(we["a"])(t),e.teams.loaded=!0,e.teams_by_id=Object(ke["a"])(Object(ke["a"])({},e.teams_by_id),Object(g["keyBy"])(t,"team.id"))},tables_by_teamrow:function(e,t){var a=Object(U["a"])(t,2),n=a[0],s=a[1];console.log("tables_by_teamrow loaded"),e.tables[n]=s},table_info:function(e,t){var a=Object(U["a"])(t,2),n=a[0],s=a[1];console.log("table_info loaded",n,s),e.table_info_kv[n]=s,console.log("table_info loaded",e.table_info_kv)},teamrows_kv:function(e,t){var a=Object(U["a"])(t,2),n=a[0],s=a[1];console.log("teamrows_kv loaded",[n,s]),e.teamrows_kv=Object(ke["a"])(Object(ke["a"])({},e.teamrows_kv),{},Object(ge["a"])({},n,s))},menu:function(e,t){var a=Object(U["a"])(t,1),n=a[0];console.log("menu loaded",[n]),e.menu=n},locked:function(e,t){console.log("locked",t),e.locked=t},is_admin:function(e,t){console.log("is_admin",t),e.is_admin=t}},actions:{config:function(e){return new Promise(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a,n){var s,o,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.get("/api/config/json");case 3:if(r=t.sent,"ok"==(null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)){t.next=6;break}throw new Error((null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||"config 가져오기 실패");case 6:return i=r.data["select-configuration"],e.commit("config",i),e.commit("config_resources_kv",Object(g["keyBy"])(i.resources||[],"name")),t.abrupt("return",a(!0));case 12:t.prev=12,t.t0=t["catch"](0),console.log("config @error",t.t0),n(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}())},config_cloud:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.admin_domain,a.next=3,_e.get("/api/team/".concat(o,"/config"),{});case 3:if(r=a.sent,"ok"==(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)){a.next=6;break}throw new Error((null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"config admin_domain 실패");case 6:i=r.data["select-configuration"],e.commit("config",i),e.commit("config_resources_kv",Object(g["keyBy"])(i.resources||[],"name"));case 9:case"end":return a.stop()}}),a)})))()},config_edit:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.team_id,a.next=3,_e.get("/api/team/".concat(o,"/config"),{});case 3:if(r=a.sent,"ok"==(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)){a.next=6;break}throw new Error((null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"config edit 실패");case 6:e.commit("config",r.data);case 7:case"end":return a.stop()}}),a)})))()},teams_config:function(e){var t=arguments;return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r,i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},r=o.once,i=void 0!==r&&r,!i||!e.state.teams.loaded){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,_e.get("/api/team");case 5:if(l=a.sent,"ok"==(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)){a.next=8;break}throw new Error((null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.message)||"팀 불러오기 실패");case 8:e.commit("teams",l.data.teams);case 9:case"end":return a.stop()}}),a)})))()},menu:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.team_id,a.next=3,_e.get("/api/team/".concat(o,"/menu"));case 3:if(r=a.sent,"ok"==(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)){a.next=6;break}throw new Error((null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"menu get 실패");case 6:e.commit("menu",[r.data.row]);case 7:case"end":return a.stop()}}),a)})))()},teamrow_full:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.team_id,r=t.teamrow_id,console.log({team_id:o,teamrow_id:r}),a.next=4,_e.get("/api/team/".concat(o,"/query/").concat(r));case 4:if(i=a.sent,"ok"==(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)){a.next=7;break}throw new Error((null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||"teamrow get 실패");case 7:e.commit("teamrows_kv",[r,i.data.row]);case 8:case"end":return a.stop()}}),a)})))()},table_info:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r,i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.team_id,r=t.teamrow_id,i=t.tablename,console.log({team_id:o,teamrow_id:r,tablename:i}),a.next=4,_e.post("/api/team/".concat(o,"/resource/").concat(r,"/table-columns"),{q:i});case 4:if(l=a.sent,"ok"==(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)){a.next=7;break}throw new Error((null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.message)||"table columns 실패");case 7:console.log(">>3",l.data.rows),e.commit("table_info",[JSON.stringify([r,i]),l.data.rows]);case 9:case"end":return a.stop()}}),a)})))()},locked:function(e,t){e.commit("locked",t)},"force reload session":function(e){return e.state.session.checked=!1,e.dispatch("session",e)},session:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,r,i,l,c,u,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.state.session.checked){t.next=3;break}return t.abrupt("return",!0);case 3:a=0;case 4:if(!(a<3)){t.next=35;break}return t.prev=5,_e.defaults.headers.common["Authorization"]="Bearer ".concat(window.localStorage.SELECT2_TOKEN),t.next=9,_e.get("/api/auth/me");case 9:if(s=t.sent,"ok"==(null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)){t.next=14;break}if(!String(null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.error).includes("Name=signed")){t.next=13;break}return t.abrupt("return",new Error((null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||"인증된 계정만 이용 가능합니다."));case 13:throw new Error("retry");case 14:return i=s.data,l=i.token,c=i.session,u=i.env,d=i.hostname,window.localStorage.SELECT2_TOKEN=l,_e.defaults.headers.common["Authorization"]="Bearer ".concat(window.localStorage.SELECT2_TOKEN),c.checked=!0,c.loaded=!0,c.roles_by_team_id=Object(g["keyBy"])(c.roles,"team_id"),e.commit("session",c),ye["b"]({email:c.email,env:u,hostname:d}),t.abrupt("return",!0);case 25:if(t.prev=25,t.t0=t["catch"](5),!(a>=2)){t.next=29;break}throw new Error("로그인이 필요합니다. (4000)");case 29:return t.next=31,xe(300);case 31:return t.abrupt("continue",32);case 32:a++,t.next=4;break;case 35:t.next=43;break;case 37:throw t.prev=37,t.t1=t["catch"](0),p={loaded:!0},e.commit("session",p),console.log(t.t1),t.t1;case 43:case"end":return t.stop()}}),t,null,[[0,37],[5,25]])})))()},"clear session":function(e){window.localStorage.SELECT2_TOKEN="",_e.defaults.headers.common["Authorization"]="",e.state.session={checked:!1}}}},Oe={create:function(){return new ve["a"].Store(je)},visibilityChange:{install:function(e){var t=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.prototype.$store.state.session.checked=!1,t.next=4,e.prototype.$store.dispatch("session");case 4:t.sent,4e3==e.prototype.$store.state.locked&&location.reload(),e.prototype.$store.commit("locked",!1),t.next=14;break;case 9:if(t.prev=9,t.t0=t["catch"](0),!e.prototype.$store.state.locked){t.next=13;break}return t.abrupt("return");case 13:e.prototype.$store.commit("locked",!0);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();setInterval(t,3e5),document.addEventListener("visibilitychange",(function(){console.log("hidden",document.hidden),"visible"===document.visibilityState&&(console.log("visible"),t())}))}}},Ce=a("c1df"),$e=a.n(Ce),Se=a("6612"),Re=a.n(Se),qe=(a("dac4"),a("1881")),Ee=a.n(qe),Pe=(a("bd62"),a("2560")),Te=a("db05"),Le=a("7c5c"),Me=a("5e22"),De=a.n(Me),Ae=a("a925");me["a"]({Vue:n["a"],dsn:"https://2e24eeaf0dde4e699b0ebf4016a75a33@o1100664.ingest.sentry.io/6168586",integrations:[new fe["a"]({routingInstrumentation:be["a"](pe),tracingOrigins:["localhost",/^\//]})],tracesSampleRate:1}),n["a"].config.productionTip=!1,n["a"].use(ve["a"]),n["a"].prototype.$store=Oe.create(),n["a"].use(Oe.visibilityChange),n["a"].prototype.$http=_e,n["a"].use(Ee.a),n["a"].component("vue-simple-context-menu",Pe["a"]),n["a"].filter("datetime",(function(e){return e?$e()(e).format("YYYY-MM-DD HH:mm"):""})),n["a"].filter("date",(function(e){return e?$e()(e).format("YYYY-MM-DD"):""})),n["a"].filter("time",(function(e){return e?$e()(e).format("h:mm A"):""})),n["a"].filter("ts_datetime",(function(e){return e?$e()(e).format("YYYY-MM-DD HH:mm"):""})),n["a"].filter("datetimeA",(function(e){return e?$e()(e).format("YYYY-MM-DD h:mm A"):""})),n["a"].filter("fromDays",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?$e()().diff($e()(e),"day")+t:""})),n["a"].filter("decodeURIComponent",(function(e){return e?decodeURIComponent(e):""})),n["a"].filter("marked",(function(e){return e?Le["marked"].parse(e):""})),n["a"].filter("sql",(function(e){if(!e)return"";try{return Object(Te["format"])(e,{}).trim()}catch(t){return console.log(t),e}})),n["a"].filter("number",(function(e){return e?Re()(e).format("0,0"):""})),n["a"].filter("sanitizeHtml",(function(e){return e?De()(e):""})),n["a"].use(Ae["a"]);var Ne=new Ae["a"]({locale:"en",messages:l});new n["a"]({i18n:Ne,router:pe,render:function(e){return e(m)}}).$mount("#app")},"5d83":function(e,t,a){},"779f":function(e,t,a){"use strict";a("00c6")},"840d":function(e,t,a){"use strict";a("ae59")},"8c1b":function(e,t,a){},"91dd":function(e,t,a){"use strict";a("e95c")},"9bce":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.page.params&&e.page.params.length?a("div",{staticClass:"mb-2"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.get_query_result_all()}}},[a("param-block",{attrs:{params:e.page.params}}),a("button",{staticClass:"btn btn-light text-primary border",attrs:{type:"submit"}},[e._v("조회")])],1)]):e._e(),a("div",{class:e.page.containerClass+" done",style:e.page.containerStyle},[e._l(e.blocks,(function(t,n){return e.result_loading?a("div",["query"==t.type?a("div",["update"==t.sqlType||"insert"==t.sqlType?[a("form",{staticClass:"mb-2",class:t.class||"mx-2 border rounded shadow-sm",on:{submit:function(a){return a.preventDefault(),e.get_query_update(t,n)}}},[t.name?a("div",{staticClass:"p-2 bg-light",staticStyle:{"border-radius":"0.25rem 0.25rem 0 0"}},[a("strong",{staticClass:"text-muted"},[a("small",[e._v(e._s(t.name))])])]):e._e(),a("div",{staticClass:"p-2"},[t.error&&t.error.code?a("div",{staticClass:"alert alert-light border"},[a("strong",[e._v(e._s(t.error.sqlMessage))]),a("code",[a("pre",{staticClass:"mb-0 bg-light p-1 text-wrap"},[e._v(e._s(e._f("sql")(t.error.sql)))])])]):e._e(),e.show_log&&t.update_result?a("div",{staticClass:"alert alert-light border"},[a("code",[a("pre",{staticClass:"mb-0 bg-light p-1 text-wrap"},[e._v(e._s(e._f("sql")(t.update_result.sql)))])])]):e.show_log||e.$store.state.admin.active?a("div",{staticClass:"alert alert-light border"},[a("code",[a("pre",{staticClass:"mb-0 bg-light p-1 text-wrap"},[e._v(e._s(e._f("sql")(t.sql)))])])]):e._e(),a("param-block",{attrs:{params:t.params}}),a("button",{staticClass:"btn btn-light border me-1",attrs:{type:"submit"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"update"==t.sqlType,expression:'block.sqlType == "update" '}]},[e._v("수정")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"insert"==t.sqlType,expression:'block.sqlType == "insert" '}]},[e._v("저장")])]),t.datetime?a("span",{staticClass:"ms-2"},[a("span",{staticClass:"mdi mdi-check text-success me-1"}),a("small",{staticClass:"text-success me-2"},[e._v("완료 "+e._s(t.datetime))]),a("small",{staticClass:"text-muted"},[e._v(" ("+e._s(t.delay/1e3)+"초 소요)")])]):e._e()],1),a("div",{staticClass:"mt-2"})])]:a("div",[t.params&&t.params.length>0&&"true"!=String(t.showButtonWithResult)?a("form",{staticClass:"p-2 mb-2",on:{submit:function(a){return a.preventDefault(),e.get_query_result(t,n)}}},[a("param-block",{attrs:{params:t.params}}),"true"!==String(t.autoload)?a("button",{staticClass:"btn btn-light border",attrs:{type:"submit"}},[e._v(e._s(t.label||"조회"))]):e._e()],1):e._e()])],2):"http"==t.type?a("div",[t.axios&&["POST","PUT"].includes((t.axios.methodType||t.axios.method).toUpperCase())?[t.name?a("div",{staticClass:"p-2 bg-light",staticStyle:{"margin-top":"-1px"}},[a("strong",{staticClass:"text-muted"},[a("small",[e._v(e._s(t.name))])])]):e._e(),e.$store.state.admin.active?a("div",{staticClass:"alert alert-light border"},[a("code",[a("pre",{staticClass:"mb-0"},[e._v(e._s(t))])])]):e._e(),t.params&&t.params.length>0?a("form",{staticClass:"p-2 mb-2",on:{submit:function(a){a.preventDefault(),!e.http_loading[n]&&e.get_http_update(t,n)}}},[a("param-block",{attrs:{params:t.params}}),a("div",{staticClass:"mt-2"}),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.autoload&&t.params,expression:"!block.autoload && block.params"}],staticClass:"btn btn-light border",attrs:{type:"submit"}},[e._v(e._s(t.label||"실행")),a("h5",{directives:[{name:"show",rawName:"v-show",value:e.http_loading[n],expression:"http_loading[i]"}],staticStyle:{width:"100px"}},[a("span",{staticClass:"mdi mdi-loading mdi-spin"})])]),t.update_result?a("div",{staticClass:"alert alert-light mt-1"},[a("pre",[e._v(e._s(t.update_result))]),a("small",{staticClass:"text-muted"},[e._v(" ("+e._s(t.delay/1e3)+"초 소요)")])]):e._e()],1):e._e()]:[t.params&&t.params.length>0?a("form",{staticClass:"p-2 mb-2",on:{submit:function(a){return a.preventDefault(),e.get_http_result(t,n)}}},[e.$store.state.admin.active?a("div",{staticClass:"alert alert-light border"},[a("code",[a("pre",{staticClass:"mb-0"},[e._v(e._s(t))])])]):e._e(),a("param-block",{attrs:{params:t.params}}),a("button",{directives:[{name:"show",rawName:"v-show",value:!1!==t.showSubmitButton&&(!t.autoload||t.params),expression:"block.showSubmitButton !== false && (!block.autoload || block.params)"}],staticClass:"btn btn-light border",attrs:{type:"submit"}},[e._v(e._s(t.label||"조회"))])],1):e._e()]],2):"markdown"==t.type?a("div",[a("strong",{staticClass:"text-muted"},[a("small",[e._v(e._s(t.name))])]),a("div",{staticClass:"markdown-body mb-3",domProps:{innerHTML:e._s(e.$options.filters.marked(t.content))}})]):e._e()]):e._e()})),e.error&&e.error.hasOwnProperty()?a("div",{staticClass:"alert alert-light border"},[a("strong",[e._v(e._s(e.error))])]):e._e(),e.error&&e.error.code?a("div",{staticClass:"alert alert-light border"},[a("strong",[e._v(e._s(e.error.sqlMessage))]),a("code",[a("pre",{staticClass:"mb-0 bg-light p-1 text-wrap"},[e._v(e._s(e._f("sql")(e.error.sql)))])])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.query_warning,expression:"query_warning"}],staticClass:"alert bg-light shadow-sm rounded-lg position-fixed",staticStyle:{top:"10px",left:"calc(50% - 200px)",width:"400px"}},[e._m(0)]),a("div",{staticClass:"position-absolute",staticStyle:{"margin-left":"-10px"}},e._l(e.results,(function(t){return e.n?a("div",{staticClass:"visible-hover-outer",staticStyle:{width:"100px"}},[t.loading?a("span",{staticClass:"mdi mdi-loading mdi-spin text-primary fade-in"}):e._e()]):e._e()})),0),e._l(e.results,(function(t){return e.n&&t.block?a("div",{staticClass:"visible-hover-outer",class:{"result-hover":"current"==e.admin_domain}},[t.error&&(t.error.code||t.error.message)?a("div",{staticClass:"alert alert-light mt-1"},[a("strong",[e._v(e._s(t.error.sqlMessage||t.error.message))])]):e._e(),e.show_log?a("div",{staticClass:"alert alert-light border"},[a("code",[a("pre",{staticClass:"mb-0"},[e._v(e._s(e._f("sql")(t.block.sql)))])])]):e._e(),"col-2"==t.block.display?[a("div",{staticClass:"d-flex flex-wrap",class:t.block.class},e._l(t.rows[0],(function(n,s){return void 0!==n?a("div",{staticClass:"d-flex border-bottom",staticStyle:{width:"50%"}},[a("div",{staticClass:"w-50 bg-light text-muted p-2"},[a("strong",[a("small",[e._v(e._s(s))])])]),a("div",{staticClass:"w-50 p-2 col-value"},[t.block.viewModal&&t.block.viewModal.useColumn&&t.block.viewModal.useColumn==s?[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.open_modal(t.rows[0],t.block_idx,t.rows[0])}}},[e._v(e._s(n))])]:n&&e._isObject(n)?[a("pre",[a("code",[e._v(e._s(n))])])]:[a("span",[e._v(e._s(n))])]],2)]):e._e()})),0)]:"card"==t.block.display?[a("div",{staticClass:"d-flex flex-wrap",class:t.block.class},e._l(t.rows[0],(function(n,s){return!0!==(t.cols_by_field[s]&&t.cols_by_field[s].hidden)?a("div",{staticClass:"pe-2 pb-1",staticStyle:{"min-width":"120px"},attrs:{set:e.col=t.cols_by_field[s]||{}}},[a("small",{staticClass:"text-muted d-block",staticStyle:{"font-size":"11px"}},[e._v(e._s(e.col.label||s))]),a("span",{staticClass:"text-break"},[t.block.viewModal&&t.block.viewModal.useColumn&&t.block.viewModal.useColumn==s?[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.open_modal(t.rows[0],t.block_idx,t.rows[0])}}},[e._v(e._s(n))])]:n&&e._isObject(n)?[a("pre",[a("code",[e._v(e._s(n))])])]:["json"==e.col.format?[a("pre",{staticClass:"border p-1 shadow-sm"},[e._v(e._s(n))])]:"html"==e.col.format?[a("div",{staticClass:"border p-1 shadow-sm",domProps:{innerHTML:e._s(e.$options.filters.sanitizeHtml(n))}})]:[a("span",{staticStyle:{"word-break":"break-word","white-space":"pre-wrap"}},[e._v(e._s(n)+" ")])]]],2)]):e._e()})),0)]:"col-1"==t.block.display?[a("div",{staticClass:"pt-3",class:t.block.class},e._l(t.rows[0],(function(n,s){return!0!==(t.cols_by_field[s]&&t.cols_by_field[s].hidden)?a("div",{staticClass:"px-3 pb-3",attrs:{set:e.col=t.cols_by_field[s]||{}}},[a("small",[a("strong",{staticClass:"d-block"},[e._v(e._s(e.col.label||s))])]),a("span",{staticClass:"text-break"},[t.block.viewModal&&t.block.viewModal.useColumn&&t.block.viewModal.useColumn==s?[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.open_modal(t.rows[0],t.block_idx,t.rows[0])}}},[e._v(e._s(n))])]:n&&e._isObject(n)?[a("pre",[a("code",[e._v(e._s(n))])])]:["json"==e.col.format?[a("pre",{staticClass:"border p-1 shadow-sm"},[e._v(e._s(n))])]:"html"==e.col.format?[a("div",{staticClass:"border p-1 shadow-sm",domProps:{innerHTML:e._s(e.$options.filters.sanitizeHtml(n))}})]:[a("span",{staticStyle:{"word-break":"break-word","white-space":"pre-wrap"}},[e._v(e._s(n)+" ")])]]],2)]):e._e()})),0)]:t.block.chartOptions&&String(t.block.chartOptions.type)?[!0!==t.block.chartOptions.loaded?[e._m(1,!0)]:[a("div",{staticClass:"mt-2"}),t.block?a("div",{staticClass:"d-flex",class:t.block.containerClass,staticStyle:{"min-height":"30px"}},[a("strong",{staticClass:"text-muted me-2"},[a("small",[e._v(e._s(t.block.name))])]),a("span",[a("small",{staticClass:"text-muted"},[e._v(" "+e._s(t.rows.length)+"건 ("+e._s(t.delay/1e3)+"초 소요)")])]),a("small",{staticClass:"text-muted ms-4 visible-hover ms-auto"},["query"==t.block.type?a("a",{staticClass:"text-reset text-decoration-none border btn btn-sm btn-light rounded-pill px-2",staticStyle:{position:"relative",top:"-3px"},attrs:{title:"구글스프레드 시트를 통해 값을 확인하고 csv, xls등으로 변환/다운 가능합니다.",href:"#"},on:{click:function(a){a.preventDefault(),!e.gsheet_loading[t.block_idx]&&e._get_query_result(t.block,t.block_idx,"gsheet")}}},[a("span",{staticClass:"mdi mdi-file-table-outline text-success"}),a("small",{staticClass:"text-muted"},[e._v(" 다운로드")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.gsheet_loading[t.block_idx],expression:"gsheet_loading[result.block_idx]"}],staticClass:"mdi mdi-loading mdi-spin text-success ms-2",staticStyle:{"font-size":"24px",position:"relative","line-height":"5px",top:"3px"}})]):e._e(),"http"==t.block.type?a("a",{staticClass:"text-reset text-decoration-none border btn btn-sm btn-light rounded-pill",staticStyle:{position:"relative",top:"-3px"},attrs:{title:"구글스프레드 시트를 통해 값을 확인하고 csv, xls등으로 변환/다운 가능합니다.",href:"#"},on:{click:function(a){a.preventDefault(),!e.gsheet_loading[t.block_idx]&&e._get_http_result(t.block,t.block_idx,"gsheet")}}},[a("span",{staticClass:"mdi mdi-file-table-outline text-success"}),a("small",{staticClass:"text-muted"},[e._v(" 다운로드")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.gsheet_loading[t.block_idx],expression:"gsheet_loading[result.block_idx]"}],staticClass:"mdi mdi-loading mdi-spin text-success ms-2",staticStyle:{"font-size":"24px",position:"relative","line-height":"5px",top:"3px"}})]):e._e()])]):e._e(),"true"==String(t.block.showButtonWithResult)&&"select"==t.block.sqlType?a("form",{staticClass:"px-2",on:{submit:function(a){return a.preventDefault(),e.get_query_result(t.block,t.block_idx)}}},[a("param-block",{attrs:{params:t.block.params}}),a("button",{staticClass:"btn btn-light border",attrs:{type:"submit"}},[e._v(e._s(t.block.label||"조회"))])],1):e._e(),a("chart",{attrs:{height:t.block.chartOptions.height,width:t.block.chartOptions.width,type:t.block.chartOptions.type,data:t.block.chartOptions.data,options:t.block.chartOptions.options}}),a("div",{staticClass:"mb-4"})]]:[t.cols?a("div",{staticClass:"d-flex flex-wrap"},[t.block.actions?[e._l(t.block.actions,(function(n,s){return[a("div",{class:n.containerClass||"ms-2"},[a("param-block",{attrs:{params:n.params}}),a("button",{staticClass:"btn border btn-light",class:n.class,attrs:{type:"button",disabled:0===e.tableSelectedRows.length,title:"클릭하여 선택된 항목을 진행"},on:{click:function(a){return e.action_button(n,s,t.block_idx)}}},[t.block.selectOptions&&t.block.selectOptions.disableSelectInfo&&e.tableSelectedRows.length?a("span",[e._v(e._s(e.tableSelectedRows.length)+"건 ")]):e._e(),a("span",[e._v(e._s(n.label||"실행"))])])],1)]}))]:e._e()],2):e._e(),t.block?a("div",{staticClass:"d-flex mt-2",class:t.block.containerClass,staticStyle:{"min-height":"30px"}},[a("strong",{staticClass:"text-muted me-2"},[a("small",[e._v(e._s(t.block.name))])]),a("span",[a("small",{staticClass:"text-muted"},[e._v(" "+e._s(t.rows.length)+"건 ("+e._s(t.delay/1e3)+"초 소요)")])]),a("small",{staticClass:"text-muted ms-4 visible-hover ms-auto"},["query"==t.block.type?a("a",{staticClass:"text-reset text-decoration-none border btn btn-sm btn-light rounded-pill px-2",staticStyle:{position:"relative",top:"-3px"},attrs:{title:"구글스프레드 시트를 통해 값을 확인하고 csv, xls등으로 변환/다운 가능합니다.",href:"#"},on:{click:function(a){a.preventDefault(),!e.gsheet_loading[t.block_idx]&&e._get_query_result(t.block,t.block_idx,"gsheet")}}},[a("span",{staticClass:"mdi mdi-file-table-outline text-success"}),a("small",{staticClass:"text-muted"},[e._v(" 다운로드")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.gsheet_loading[t.block_idx],expression:"gsheet_loading[result.block_idx]"}],staticClass:"mdi mdi-loading mdi-spin text-success ms-2",staticStyle:{"font-size":"24px",position:"relative","line-height":"5px",top:"3px"}})]):e._e(),"http"==t.block.type?a("a",{staticClass:"text-reset text-decoration-none border btn btn-sm btn-light rounded-pill",staticStyle:{position:"relative",top:"-3px"},attrs:{title:"구글스프레드 시트를 통해 값을 확인하고 csv, xls등으로 변환/다운 가능합니다.",href:"#"},on:{click:function(a){a.preventDefault(),!e.gsheet_loading[t.block_idx]&&e._get_http_result(t.block,t.block_idx,"gsheet")}}},[a("span",{staticClass:"mdi mdi-file-table-outline text-success"}),a("small",{staticClass:"text-muted"},[e._v(" 다운로드")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.gsheet_loading[t.block_idx],expression:"gsheet_loading[result.block_idx]"}],staticClass:"mdi mdi-loading mdi-spin text-success ms-2",staticStyle:{"font-size":"24px",position:"relative","line-height":"5px",top:"3px"}})]):e._e()])]):e._e(),t.cols?a("div",[t.block.contextMenu?[a("vue-simple-context-menu",{ref:"contextMenu."+t.block_idx,refInFor:!0,attrs:{elementId:"__contextMenu."+t.block_idx,options:t.block.contextMenu},on:{"option-clicked":e.optionClicked}})]:e._e(),a("div",{staticClass:"table-responsive-lg",class:t.block.containerClass||"done"},[a("vue-good-table",{ref:"table"+e.n[t.block.name],refInFor:!0,attrs:{styleClass:"table table-hover vgt-table bordered vgt-responsive",columns:t.cols,rows:t.rows,"search-options":t.block.searchOptions||{},"select-options":t.block.selectOptions||{},"pagination-options":t.block.paginationOptions||{}},on:{"on-selected-rows-change":e.selectionChanged,"on-search":e.onSearch},scopedSlots:e._u([{key:"table-row",fn:function(n){return[a("span",{on:{contextmenu:function(a){return e.open_context(a,t.block_idx,n.row)}}},["__조회__"==n.column.field?a("span",[t.block.viewModal&&!t.block.viewModal.useColumn?a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.open_modal(n.formattedRow,t.block_idx,n.row)}}},[e._v("조회")]):e._e()]):"__수정__"==n.column.field?a("span",[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.edit_modal(n.formattedRow,t.block_idx,n.row)}}},[e._v("수정")])]):e.blocks[t.block_idx].refs&&e.blocks[t.block_idx].refs_by_column&&e.blocks[t.block_idx].refs_by_column[n.column.field]?a("span",{attrs:{set:e.ref=e.blocks[t.block_idx].refs_by_column[n.column.field]}},[e.ref?[e._isArray(n.row[e.ref.valueFromColumn||n.column.field])?[e._l(n.row[e.ref.valueFromColumn||n.column.field],(function(t){var n;return[a("router-link",{staticClass:"me-2",attrs:{to:"/admin/"+e.admin_domain+"/"+e.ref.href+"#"+encodeURIComponent(JSON.stringify((n={},n[e.ref.param]=t,n))),target:e.ref.target||"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v(e._s(t))])]}))]:[a("a",{attrs:{href:""+e.replace_url("/admin/"+e.admin_domain+"/",e.ref.href,n.row[e.ref.valueFromColumn||n.column.field],e.ref),target:e.ref.target||"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v(e._s(n.formattedRow[n.column.field]))])]]:e._e()],2):a("span",[e._isArray(n.row[n.column.field])?e._l(n.row[n.column.field],(function(t){return a("span",{staticClass:"me-2"},[e._v(e._s(t))])})):t.block.viewModal&&t.block.viewModal.useColumn==n.column.field?[a("a",{staticClass:"d-block w-100",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.open_modal(n.formattedRow,t.block_idx,n.row)}}},[e._v(e._s(n.formattedRow[n.column.field]||"(비어있음)"))])]:"json"==n.column.format?[a("pre",{staticClass:"mb-0",staticStyle:{"word-break":"break-word","white-space":"pre-wrap","max-height":"8rem"},on:{click:function(t){return e.open_json(n.column,n.formattedRow[n.column.field])}}},[e._v(e._s(n.formattedRow[n.column.field]))])]:"textarea"==n.column.format?[a("div",{staticStyle:{"max-height":"8rem",overflow:"scroll"}},[a("div",{staticStyle:{"word-break":"break-word","white-space":"pre-wrap"}},[e._v(e._s(n.formattedRow[n.column.field]))])])]:"html"==n.column.format?[a("div",{staticStyle:{"max-height":"8rem",overflow:"scroll"}},[a("div",{domProps:{innerHTML:e._s(e.$options.filters.sanitizeHtml(n.formattedRow[n.column.field]))}})])]:[e._v(e._s(n.formattedRow[n.column.field]))]],2)])]}},{key:"pagination-bottom",fn:function(e){return[a("table-pagination",{attrs:{paginationOptions:t.block.paginationOptions,total:e.total,pageChanged:e.pageChanged,perPageChanged:e.perPageChanged}})]}}],null,!0)})],1)],2):e._e()],t.block.tabOptions?[a("div",{staticClass:"mt-2",class:t.block.tabOptions.containerClass},["button"==t.block.tabOptions.type?[a("div",{staticClass:"btn-group shadow-sm"},e._l(t.block.tabOptions.tabs,(function(n,s){return a("button",{staticClass:"btn btn-light border",class:{"active text-primary":t.block.tabOptions.current_idx==s},on:{click:function(a){return e.open_tabOptions(t.block.tabOptions,s)}}},[e._v(e._s(n.name))])})),0)]:"label"==t.block.tabOptions.type?[a("ul",{staticClass:"nav nav-pills",class:""+t.block.tabOptions.tabClass},e._l(t.block.tabOptions.tabs,(function(n,s){return a("li",{staticClass:"nav-item pe-1"},[a("a",{staticClass:"nav-link rounded-pill",class:{"active shadow-sm":t.block.tabOptions.current_idx==s},attrs:{href:"#"},on:{click:function(a){return e.open_tabOptions(t.block.tabOptions,s)}}},[e._v(e._s(n.name))])])})),0)]:[a("ul",{staticClass:"nav nav-tabs",class:""+t.block.tabOptions.tabClass},e._l(t.block.tabOptions.tabs,(function(n,s){return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:t.block.tabOptions.current_idx==s},attrs:{href:"#"},on:{click:function(a){return e.open_tabOptions(t.block.tabOptions,s)}}},[e._v(e._s(n.name))])])})),0)],e._l(t.block.tabOptions.tabs,(function(n,s){return s==t.block.tabOptions.current_idx?a("div",{class:"p-2 "+t.block.tabOptions.contentClass+" tab-content-type-"+(t.block.tabOptions.type||"tabs"),style:{minHeight:t.block.tabOptions.height+"px"}},[a("table-block-self",{attrs:{blocks:t.block.tabOptions.tabs[s].blocks,page:t.block.tabOptions.tabs[s],depth:2,path:e.path+".blocks."+t.block_idx+".tabOptions.tabs."+s,admin_domain:e.admin_domain,state_params:e.get_state_params()}})],1):e._e()}))],2)]:e._e()],2):e._e()}))],2)])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("strong",{staticClass:"text-secondary"},[a("small",[e._v("데이터를 기다리고 있습니다. 응답이 늦다면 쿼리를 확인해주세요.")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h5",{staticStyle:{width:"100px"}},[a("span",{staticClass:"mdi mdi-loading mdi-spin text-primary"})])}],o=a("53ca"),r=a("5530"),i=a("1da1"),l=a("2909"),c=a("b85c"),u=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("b64b"),a("d81d"),a("b0c0"),a("ac1f"),a("5319"),a("caad"),a("2532"),a("99af"),a("07ac"),a("a15b"),a("02cc")),d=a("2ef0"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"border-bottom"},[a("div",{staticClass:"float-end"},[a("button",{staticClass:"btn btn-default",on:{click:function(t){return e.$modal.hide("modal"+e.depth)}}},[e._v("닫기 ×")])]),a("div",{staticClass:"clearfix"}),e.$store.state.admin.active?a("button",{staticClass:"btn btn-light text-success",attrs:{type:"button"}},[e._v("관리자")]):e._e()]),e.block.viewModal&&!1!==e.block.viewModal.displayParentRow?a("div",{staticClass:"d-flex flex-wrap"},e._l(e.row,(function(t,n){return t?a("div",{staticClass:"d-flex border-bottom",staticStyle:{width:"50%"}},[a("div",{staticClass:"w-50 bg-light text-muted p-2"},[a("strong",[a("small",[e._v(e._s(n))])])]),a("div",{staticClass:"w-50 p-2 col-value"},[t&&"{"==t[0]&&"}"==t[t.length-1]?a("pre",[a("code",[e._v(e._s(t))])]):a("span",[e._v(e._s(t))])])]):e._e()})),0):e._e(),a("div",{staticClass:"p-2"},[a("div",{staticClass:"pb-2"}),e.block.viewModal?[a("table-block",{attrs:{blocks:e.block.viewModal.blocks,row:e.row,row_json:e.row_json,page:e.block.viewModal,depth:e.depth,modal_block_idx:e.modal_block_idx,path:e.path+".viewModal",admin_domain:e.admin_domain}})]:e._e()],2)])},m=[],b=a("f617"),f={name:"AdminModal",props:["page","row","block","depth","modal_block_idx","path","admin_domain","row_json"],components:{VueGoodTable:b["a"],TableBlock:function(){return Promise.resolve().then(a.bind(null,"9bce"))}},computed:{},data:function(){return{cols:[],rows:[],error:{}}},mounted:function(){this.load()},methods:{load:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},h=f,_=(a("3423"),a("2877")),v=Object(_["a"])(h,p,m,!1,null,"42a74e08",null),g=v.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"p-4 bg-light"},[a("div",{staticClass:"d-flex"},[a("h2",{staticClass:"title"},[e._v(e._s(e.column.label||e.column.field))])])]),a("div",{staticClass:"shadow"},[a("textarea",{staticClass:"w-100 p-2 border-0",staticStyle:{height:"80vh"}},[e._v(e._s(e.code)+" ")])])])},w=[],y={name:"TextViewer",props:["column","value"],components:{},computed:{},data:function(){return{code:String(this.value),current_lang:this.column.highlightLanguage||"json"}},mounted:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{load:function(){},highlighter:function(e){return highlight(e,languages.js)}}},x=y,j=(a("840d"),Object(_["a"])(x,k,w,!1,null,"010ad59b",null)),O=j.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("canvas",{attrs:{id:e.id,width:e.width,height:e.height}})])},$=[],S=a("d549"),R={data:function(){return{id:"chart"+Date.now()+Math.floor(1e3*Math.random())}},props:["type","width","height","data","options"],mounted:function(){var e=this;setTimeout((function(){var t=document.getElementById(e.id);new S["a"](t,{type:e.type,data:e.data,options:Object.assign({responsive:!1},e.options)})}),100)}},q=R,E=Object(_["a"])(q,C,$,!1,null,null,null),P=E.exports,T=a("c1df"),L=a.n(T),M=new u["Parser"],D={name:"TableBlock",props:["row","blocks","page","depth","path","admin_domain","team_id","teamrow_id","show_log","selectedRows","row_json","state_params"],components:{VueGoodTable:b["a"],AdminModal:g,TextViewer:O,Chart:P,TableBlockSelf:function(){return Promise.resolve().then(a.bind(null,"9bce"))},ParamBlock:function(){return a.e("chunk-40b5ffca").then(a.bind(null,"fe79"))},TablePagination:function(){return a.e("chunk-c5dfc98c").then(a.bind(null,"7b29"))}},computed:{},data:function(){return{cols:[],rows:[],results:{},error:{},current_block:{},count_block_names:0,gsheet_loading:[],http_loading:[],result_loading:!1,n:{},tableSelectedRows:[],query_warning:"",query_warning_timeout:null,current_context_block_idx:null}},watch:{},mounted:function(){var e=this;this.load();var t,a={},n=0,s=Object(c["a"])(this.blocks);try{for(s.s();!(t=s.n()).done;){var o=t.value;a[o.name]=n++}}catch(u){s.e(u)}finally{s.f()}this.n=a,this.count_block_names=Object.keys(a).length;var r=function(t){var a=e.blocks[t];if(a.paginationOptions&&(a.paginationOptions.firstLabel=a.paginationOptions.firstLabel||"처음",a.paginationOptions.lastLabel=a.paginationOptions.lastLabel||"마지막",a.paginationOptions.nextLabel=a.paginationOptions.nextLabel||"다음",a.paginationOptions.prevLabel=a.paginationOptions.prevLabel||"이전",a.paginationOptions.rowsPerPageLabel=a.paginationOptions.rowsPerPageLabel||"표시",a.paginationOptions.ofLabel=a.paginationOptions.ofLabel||"/",a.paginationOptions.pageLabel=a.paginationOptions.pageLabel||"페이지",a.paginationOptions.allLabel=a.paginationOptions.allLabel||"전체"),a.sql)if(a.sqlType);else try{var n=e.$store.state.config_resources_kv[a.resource],s=a.sql.replace(/::([A-Za-z]+)/g,"").replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,"''").replace(/\{\{(\s)?query(\s)?\}\}/g,"1=1").replace(/\{\{(\s)?orderBy(\s)?\}\}/g,""),o=M.astify(s,{database:{mysql:"mysql",postgres:"postgresql"}[n]});a.sqlType=String(o.type).toLowerCase()}catch(r){alert("SQL 해석 실패"),console.log("parse error: ",r)}e.results[a.name]={gsheet_loading:!1,loading:!1,cols:[],rows:[]},"true"==String(a.autoload)&&"select"==a.sqlType&&(e.results[a.name].loading=!0,e._get_query_result(a,t)),e.gsheet_loading.push(!1),e.http_loading.push(!1),a.params=(a.params||[]).map((function(a,n){if(a.defaultValueFromRow){var s="true"==String(a.defaultValueFromRow)?a.key:a.defaultValueFromRow;a.datalist&&a.datalistLength?(e.row_json[s]&&(a.values=Object(l["a"])(e.row_json[s])),e.$set(a,"values",a.values),a.value=""):"date"==a.format?a.value=L()(e.row_json[s]).format("YYYY-MM-DD"):a.value=e.row_json[s]}if(void 0!==a.defaultValue&&(a.value=a.value||a.defaultValue),a.valueFromRow){var o="true"==String(a.valueFromRow)?a.key:a.valueFromRow;a.value=e.row_json[o]}return a.datalistFromQuery&&(a.datalist=a.datalist||[],e.load_datalist(a,t,n)),a})),a.refs_by_column={},a.refs&&(a.refs_by_column=Object(d["keyBy"])(a.refs,"column"))};for(var i in this.blocks)r(i);this.page.params=(this.page.params||[]).map((function(t,a){return t.datalistFromQuery&&(t.datalist=t.datalist||[],e.load_datalist(t,-1,a)),t})),this.apply_hash_params(),this.result_loading=!0,this.$root.$on("reloadAfterSubmit",(function(){console.log("// this._get_query_result_all()"),e._get_query_result_all()}))},methods:{open_tabOptions:function(e,t){this.$set(e,"current_idx",t)},open_context:function(e,t,a){if(this.$refs["contextMenu.".concat(t)]){var n,s;if("A"==(null===(n=e.srcElement)||void 0===n?void 0:n.nodeName))return;this.current_context_block_idx=t,null===(s=this.$refs["contextMenu.".concat(t)][0])||void 0===s||s.showMenu(e,a),e.preventDefault(),e.stopPropagation()}},optionClicked:function(e){var t,a,n=0,s=Object(c["a"])(this.blocks[this.current_context_block_idx].actions);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(o.label==e.option.action){t=o;break}n++}}catch(r){s.e(r)}finally{s.f()}t&&this.action_button(t,n,this.current_context_block_idx)},open_json:function(e,t){console.log(e.field,e.label,t);var a=Object(d["isObject"])(t)?JSON.stringify(t,null,"  "):t;this.$modal.show(O,{column:e,value:a},{scrollable:!0,height:"auto",transition:"none",name:"modal2",width:"90%"})},replace_url:function(e,t,a,n){return t.includes("{{".concat(n.param,"}}"))?t.replace("{{".concat(n.param,"}}"),a):e+t+"?".concat(encodeURIComponent(n.param),"=").concat(encodeURIComponent(a))},_isArray:d["isArray"],onSearch:function(e){console.log("searchTemr: ",this.$refs["table0"][0].searchTerm)},load_datalist:function(e,t,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o,r,i,c,u,d,p;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,r=n.blocks[t].params.map((function(e){return{key:e.key,value:e.value}})),i={},i.path=-1===t?"".concat(n.path,".params.").concat(a,".datalistFromQuery"):"".concat(n.path,".blocks.").concat(t,".params.").concat(a,".datalistFromQuery"),i.admin_domain=n.admin_domain,"current"!=n.admin_domain){s.next=11;break}return s.next=8,n.$http.post("/api/team/".concat(n.team_id,"/query/test-block"),{block:e,fields:r,teamrow_id:n.teamrow_id});case 8:c=s.sent,s.next=14;break;case 11:return s.next=13,n.$http.post("/api/block/query",{fields:r},{params:i});case 13:c=s.sent;case 14:"ok"!=(null===(o=c.data)||void 0===o?void 0:o.message)?(d=(null===(u=c.data)||void 0===u?void 0:u.error)||c.data,alert("입력폼 옵션 가져오기 실패. \n\ndatalistFromQuery: ".concat(JSON.stringify(d,null,"  ")))):(p=c.data.rows.map((function(e){var t=e.value||Object.values(e)[0],a=e.label||t;return{value:t,label:a}})),e.datalist=Object(l["a"])(p)),s.next=20;break;case 17:s.prev=17,s.t0=s["catch"](0),console.log("failed to load_datalist",s.t0);case 20:case"end":return s.stop()}}),s,null,[[0,17]])})))()},action_button:function(e,t,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o,r,i,l,c,u;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.confirmText){s.next=4;break}if(o=n.tableSelectedRows.map((function(t){return t["".concat(e.valueFromSelectedRowsAs||"id")]})),confirm("".concat(e.confirmText,"\n\n대상: ").concat(o.join(", ")))){s.next=4;break}return s.abrupt("return",!1);case 4:if(r=n.get_state_params(),s.prev=5,l=r.concat(e.params||[]).map((function(e){if(e.valueFromSelectedRows){var t=n.tableSelectedRows.map((function(t){return t["".concat(e.valueFromSelectedRowsAs||"id")]}));e.value=t}if(e.valueFromPrompt&&(e.value=prompt(e.promptText||"입력:"),null===e.value))throw alert("입력 취소됨"),new Error("input cancel");return e})),c={},c.path="".concat(n.path,".blocks.").concat(a,".actions.").concat(t),c.admin_domain=n.admin_domain,"current"!=n.admin_domain){s.next=16;break}return s.next=13,n.$http.post("/api/team/".concat(n.team_id,"/query/test-block"),{block:block,fields:l,teamrow_id:n.teamrow_id});case 13:u=s.sent,s.next=19;break;case 16:return s.next=18,n.$http.post("/api/block/query",{fields:l},{params:c});case 18:u=s.sent;case 19:"ok"!=(null===(i=u.data)||void 0===i?void 0:i.message)?alert("실패 \n\n".concat(JSON.stringify(u.data.error))):(n._get_query_result_all(),alert("완료")),s.next=25;break;case 22:s.prev=22,s.t0=s["catch"](5),console.log(s.t0);case 25:case"end":return s.stop()}}),s,null,[[5,22]])})))()},selectionChanged:function(e){console.log(e.selectedRows),this.tableSelectedRows=e.selectedRows},_isObject:d["isObject"],apply_hash_params:function(){var e=this;if(this.depth>1)this._get_query_result_all();else{console.log(this.$route.hash);var t=Object(d["cloneDeep"])(this.$route.query),a=!1,n=[];for(var s in t){if(this.page.params){var o,r=Object(c["a"])(this.page.params);try{for(r.s();!(o=r.n()).done;){var i=o.value;if(i.key==s){this.$set(i,"value",t[s]),a=!0;break}}}catch(f){r.e(f)}finally{r.f()}}if(this.page.blocks)for(var l in this.page.blocks){var u=this.page.blocks[l];if(("query"!=u.type||"insert"!=u.sqlType&&"update"!=u.sqlType)&&u.params){var p,m=Object(c["a"])(u.params);try{for(m.s();!(p=m.n()).done;){var b=p.value;if(b.key==s){Object(d["isArray"])(t[s])?this.$set(b,"values",t[s]):b.datalistLength>0?this.$set(b,"values",[t[s]]):this.$set(b,"value",t[s]||b.defaultValue||""),n.push(l);break}}}catch(f){m.e(f)}finally{m.f()}}}}t.hasOwnProperty()||(a=!0),a?(this._get_query_result_all(),this._get_http_result_all()):n.forEach((function(t){e._get_query_result(e.current_page.blocks[t],t),e._get_http_result(e.current_page.blocks[t],t)}))}},_get_query_result_all:function(){for(var e in this.page.blocks)this._get_query_result(this.page.blocks[e],e)},_get_http_result_all:function(){for(var e in this.page.blocks)this._get_http_result(this.page.blocks[e],e)},get_query_update:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o,r,i,l,u,p,m,b,f,h,_,v,g,k,w,y,x,j,O,C,$,S,R;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.datetime="",e.update_result={},"query"==e.type){n.next=4;break}return n.abrupt("return",console.log("non query block request; canceled."));case 4:if(e.sql){n.next=6;break}return n.abrupt("return",console.log("query block sql empty; canceled."));case 6:n.prev=6,o=Object(c["a"])(e.params);try{for(o.s();!(r=o.n()).done;)i=r.value,i.valueFromRow&&(l="true"==String(i.valueFromRow)?i.key:i.valueFromRow,a.$set(i,"value",a.row_json[l]))}catch(q){o.e(q)}finally{o.f()}if(u=Object(d["cloneDeep"])(e.params||[]).map((function(e){return e.datalist&&e.datalistLength&&("json"==e.datalistType?e.value=JSON.stringify(Object(d["uniq"])(Object(d["compact"])(e.values))):"csv"==e.datalistType&&(e.value=Object(d["uniq"])(Object(d["compact"])(e.values)).join(","))),e})),confirm("실행하시겠습니까?\n\n"+u.map((function(e){return"".concat(e.label||e.key,": ").concat(e.value)})).join("\n"))){n.next=12;break}return n.abrupt("return",!1);case 12:if(p={},p.path="".concat(a.path,".blocks.").concat(t),p.admin_domain=a.admin_domain,m=Date.now(),"current"!=a.admin_domain){n.next=22;break}return n.next=19,a.$http.post("/api/team/".concat(a.team_id,"/query/test-block"),{block:e,fields:u,teamrow_id:a.teamrow_id});case 19:b=n.sent,n.next=25;break;case 22:return n.next=24,a.$http.post("/api/block/query",{fields:u},{params:p});case 24:b=n.sent;case 25:if(f=Date.now(),"ok"!=(null===(s=b.data)||void 0===s?void 0:s.message))a.$set(e,"error",(null===(h=b.data)||void 0===h?void 0:h.error)||{}),a.$set(e,"update_result",null);else{if(_=b.data.rows,"current"==a.admin_domain){v=b.data,g=v.log_sql,k=v.log_params,w=g,y=Object(c["a"])(k);try{for(y.s();!(x=y.n()).done;)j=x.value,w=w.replace("?",JSON.stringify(j))}catch(q){y.e(q)}finally{y.f()}_.sql=w}if(a.$set(e,"update_result",_),a.$set(e,"error",null),a.$set(e,"delay",f-m),a.$set(e,"datetime",L()().format("YYYY-MM-DD HH:mm:ss")),"false"!=String(e.resetAfterSubmit)){O=Object(c["a"])(e.params);try{for(O.s();!(C=O.n()).done;)$=C.value,a.$set($,"value",""),$.values&&a.$set($,"values",[])}catch(q){O.e(q)}finally{O.f()}}"true"==String(e.reloadAfterSubmit)&&(a._get_query_result_all(),a.$root.$emit("reloadAfterSubmit")),(e.params||[]).map((function(e,n){return e.datalistFromQuery&&(e.datalist=e.datalist||[],a.load_datalist(e,t,n)),e})),"update"==e.sqlType?alert("수정했습니다. \n\n"+((null===(S=e.update_result)||void 0===S?void 0:S.info)||"")):"insert"==e.sqlType&&alert("저장했습니다. \n\n"+((null===(R=e.update_result)||void 0===R?void 0:R.info)||""))}n.next=32;break;case 29:n.prev=29,n.t0=n["catch"](6),console.log(n.t0);case 32:case"end":return n.stop()}}),n,null,[[6,29]])})))()},get_query_result_all:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.get_state_params(),console.log("get_query_result_all",a),n={},s=Object(c["a"])(a);try{for(s.s();!(o=s.n()).done;)r=o.value,n[r.key]=r.value||r.defaultValue||""}catch(i){s.e(i)}finally{s.f()}e.$router.push({query:n}).catch((function(){console.log("params not changed. let's reload."),e.apply_hash_params()}));case 6:case"end":return t.stop()}}),t)})))()},get_state_params:function(){var e,t,a=Object.assign({},this.state_params||{}),n=Object(c["a"])(this.page.blocks);try{for(n.s();!(t=n.n()).done;){var s,o=t.value;if(("query"!=o.type||"insert"!=o.sqlType&&"update"!=o.sqlType)&&(null!==(s=o.params)&&void 0!==s&&s.length)){var r,i=Object(c["a"])(o.params);try{for(i.s();!(r=i.n()).done;){var l=r.value;"true"!=String(l.valueFromRow||"false")&&("true"!=String(l.valueFromEnv||"false")&&(void 0===a[l.key]&&(a[l.key]=Object.assign({},l)),a[l.key].value=l.value))}}catch(m){i.e(m)}finally{i.f()}}}}catch(m){n.e(m)}finally{n.f()}if(null!==(e=this.page.params)&&void 0!==e&&e.length){var u,d=Object(c["a"])(this.page.params);try{for(d.s();!(u=d.n()).done;){var p=u.value;"true"!=String(p.valueFromRow||"false")&&("true"!=String(p.valueFromEnv||"false")&&(void 0===a[p.key]&&(a[p.key]=Object.assign({},p)),a[p.key].value=p.value))}}catch(m){d.e(m)}finally{d.f()}}return Object.values(a)},get_query_result:function(e,t){var a=arguments,n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o,i,l,u,p,m,b;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(o=a.length>2&&void 0!==a[2]?a[2]:"",console.log("this.admin_domain",n.admin_domain),"current"!=n.admin_domain){s.next=5;break}return n._get_query_result(e,t,o),s.abrupt("return");case 5:if(!(n.depth>1)){s.next=8;break}return n._get_query_result(e,t,o),s.abrupt("return");case 8:if("query"==e.type){s.next=10;break}return s.abrupt("return",console.log("non query block request canceled."));case 10:if(e.sql){s.next=12;break}return s.abrupt("return",console.log("query block sql empty; canceled."));case 12:if(i=n.get_state_params(),i.length){l={},u=Object(c["a"])(i);try{for(u.s();!(p=u.n()).done;)m=p.value,m.values||m.datalistLength>1?(b=Object(d["uniq"])(Object(d["compact"])(m.values)),l[m.key]=b.length?b:void 0):l[m.key]=String(m.value||m.defaultValue||"")}catch(f){u.e(f)}finally{u.f()}n.$router.push({query:Object(r["a"])(Object(r["a"])({},n.$route.query),l)}).catch((function(e){console.log("params not changed. let's reload."),n.apply_hash_params()}))}else n._get_query_result(e,t,o);case 14:case"end":return s.stop()}}),s)})))()},_get_query_result:function(e,t){var a=arguments,n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var i,u,p;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(i=a.length>2&&void 0!==a[2]?a[2]:"",console.log("block AST:",e.sqlType),"select"==e.sqlType){s.next=4;break}return s.abrupt("return",console.log("non select canceled."));case 4:if(!0!==e.fetching){s.next=6;break}return s.abrupt("return",console.log("block isFetching=true"));case 6:return e.fetching=!0,n.query_warning=!1,u=setTimeout((function(){n.query_warning=!0,n.query_warning_timeout&&clearTimeout(n.query_warning_timeout),n.query_warning_timeout=setTimeout((function(){n.query_warning=!1}),5e3)}),5e3),s.prev=9,s.delegateYield(regeneratorRuntime.mark((function a(){var s,o,u,p,m,b,f,h,_,v,g,k,w,y,x,j,O,C,$,S,R,q,E,P,T,M,D,A,N,F,U,z,Y,V,B,I,H,G;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("gsheet"!=i){a.next=20;break}return n.gsheet_loading[t]=!0,n.gsheet_loading=Object(l["a"])(n.gsheet_loading),a.next=5,n.$http.get("/api/connect/google/spreadsheet/refresh");case 5:if(v=a.sent,!("not connected"==(null===v||void 0===v||null===(b=v.data)||void 0===b?void 0:b.message)||null!==v&&void 0!==v&&null!==(f=v.data)&&void 0!==f&&f.message.includes("invalid_grant"))){a.next=18;break}return a.next=9,n.$http.get("/api/connect/google/spreadsheet");case 9:if(w=a.sent,"ok"==(null===w||void 0===w||null===(g=w.data)||void 0===g?void 0:g.message)){a.next=12;break}throw new Error((null===w||void 0===w||null===(k=w.data)||void 0===k?void 0:k.message)||"연결된 구글시트 계정이 없음");case 12:return y=500,x=670,j=window.top.outerHeight/2+window.top.screenY-x/2,O=window.top.outerWidth/2+window.top.screenX-y/2,window.open(w.data.url,"YSG_GoogleSheetStep1","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(y,", height=").concat(x,", top=").concat(j,", left=").concat(O)),a.abrupt("return",{v:void 0});case 18:if("ok"==(null===v||void 0===v||null===(h=v.data)||void 0===h?void 0:h.message)){a.next=20;break}throw new Error((null===v||void 0===v||null===(_=v.data)||void 0===_?void 0:_.message)||"구글연동 확인 실패");case 20:if("query"==e.type){a.next=22;break}return a.abrupt("return",{v:console.log("non query block request canceled.")});case 22:if(C=e.params,n.page.params){if($=Object.assign({},n.state_params||{}),e.params){S=Object(c["a"])(e.params);try{for(S.s();!(R=S.n()).done;)q=R.value,$[q.key]||($[q.key]=Object.assign({},q))}catch(J){S.e(J)}finally{S.f()}}E=Object(c["a"])(n.page.params);try{for(E.s();!(P=E.n()).done;)T=P.value,$[T.key]||($[T.key]=Object.assign({},T)),$[T.key].value=T.value||""}catch(J){E.e(J)}finally{E.f()}C=Object.values($)}if(e.chartOptions&&(e.chartOptions.loaded=!1),M=Date.now(),"current"!=n.admin_domain){a.next=32;break}return a.next=29,n.$http.post("/api/team/".concat(n.team_id,"/query/test-block"),{block:e,fields:C,response_type:i,teamrow_id:n.teamrow_id});case 29:D=a.sent,a.next=35;break;case 32:return a.next=34,n.$http.post("/api/block/query",{fields:C},{params:{path:"".concat(n.path,".blocks.").concat(t),block_idx:t,admin_domain:n.admin_domain,response_type:i}});case 34:D=a.sent;case 35:if(A=Date.now(),"ok"==(null===(s=D.data)||void 0===s?void 0:s.message)){a.next=44;break}return n.error=(null===(N=D.data)||void 0===N?void 0:N.error)||(null===(F=D.data)||void 0===F?void 0:F.message),"gsheet"==i&&alert("내보내기 실패: ".concat(D.data.message)),n.gsheet_loading[t]=!1,n.gsheet_loading=Object(l["a"])(n.gsheet_loading),a.abrupt("return",{v:void 0});case 44:n.error={};case 45:if(null===(o=D)||void 0===o||null===(u=o.data)||void 0===u||!u.spreadsheetUrl){a.next=50;break}return window.open(D.data.spreadsheetUrl),n.gsheet_loading[t]=!1,n.gsheet_loading=Object(l["a"])(n.gsheet_loading),a.abrupt("return",{v:void 0});case 50:if(n.results[e.name]||(n.results[e.name]={name:e.name,cols:[],rows:[]}),n.results[e.name].block=e,e.chartOptions?(D.data.rows.length>0&&(e.chartOptions.data||(e.chartOptions.data={datasets:[],labels:[]}),void 0===e.chartOptions.backgroundColor&&(e.chartOptions.backgroundColor=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]),void 0===e.chartOptions.borderColor&&(e.chartOptions.borderColor=["rgba(0,0,0, 0.2)"]),void 0===e.chartOptions.borderWidth&&(e.chartOptions.borderWidth=1),e.chartOptions.data.labels=D.data.rows.map((function(t){return t[e.chartOptions.x]||""})),e.chartOptions.data.datasets=Object(d["flatten"])([e.chartOptions.y]).map((function(t,a){var n,s,o,r,i=D.data.rows.map((function(e){return e[t]||null}));return{label:(null===(n=e.chartOptions.data.datasets[a])||void 0===n?void 0:n.label)||t,data:i,backgroundColor:(null===(s=e.chartOptions.data.datasets[a])||void 0===s?void 0:s.backgroundColor)||e.chartOptions.backgroundColor,borderColor:(null===(o=e.chartOptions.data.datasets[a])||void 0===o?void 0:o.borderColor)||e.chartOptions.borderColor,borderWidth:(null===(r=e.chartOptions.data.datasets[a])||void 0===r?void 0:r.borderWidth)||e.chartOptions.borderWidth}}))),e.chartOptions.loaded=!0):D.data.rows.length>0?(e.columnOptions?e.columnOptionsAppend?function(){for(var t={},a=0;a<D.data.rows.length;a++){if(a>=30)break;Object.keys(D.data.rows[a]).map((function(e){t[e]={field:e,label:e}}))}e.columnOptions.map((function(e){Object(d["isObject"])(e)?(e.tdClass&&e.tdClass.length&&e.tdClass.includes("return")&&(e.tdClass=new Function("row",e.tdClass)),e.formatFn&&n.$options.filters[e.formatFn]&&(e.formatFn=n.$options.filters[e.formatFn]),e.label=e.label||e.field,t[e.field]=e):t[e.field]={field:e,label:e}})),n.results[e.name].cols=Object.values(t)}():n.results[e.name].cols=e.columnOptions.map((function(e){return Object(d["isObject"])(e)?(e.tdClass&&e.tdClass.length&&e.tdClass.includes("return")&&(e.tdClass=new Function("row",e.tdClass)),e.formatFn&&n.$options.filters[e.formatFn]&&(e.formatFn=n.$options.filters[e.formatFn]),e.label=e.label||e.field,e):{field:e,label:e}})):function(){for(var t={},a=function(e){if(e>=30)return"break";Object.keys(D.data.rows[e]).map((function(a){var n=D.data.rows[e][a],s="text",o={};n&&null!==n&&(isFinite(+n)?s="number":Object(d["isObject"])(n)?(s="json",o.formatFn=function(e){return JSON.stringify(e,null,"  ")}):!0===n||!1===n?s="boolean":n&&"null"!=n&&null!=n&&L()(n,"YYYY-MM-DDTHH:mm:ss.000Z",!0).isValid()&&(o.formatFn=function(e){return e?L()(e).format("YYYY-MM-DD HH:mm:ss"):""}));var i=a;t[i]=t[i]||Object(r["a"])({label:i,field:i,type:s},o),"text"==t[i].type&&"text"!=s&&(t[i]=Object.assign(t[i],Object(r["a"])({label:a,field:a,type:s},o)))}))},s=0;s<D.data.rows.length;s++){var o=a(s);if("break"===o)break}n.results[e.name].cols=Object.keys(t).map((function(e){return t[e]}))}(),!e.viewModal||null!==(U=e.viewModal)&&void 0!==U&&U.useColumn||n.results[e.name].cols.push({label:"조회",field:"__조회__",sortable:!1,globalSearchDisabled:!0,width:"100px"}),e.editModal&&n.results[e.name].cols.push({label:"수정",field:"__수정__",sortable:!1,globalSearchDisabled:!0,width:"100px"})):n.results[e.name].cols=[],n.results[e.name].cols_by_field=Object(d["keyBy"])(n.results[e.name].cols,"field"),"current"==n.admin_domain){z=D.data,Y=z.log_sql,V=z.log_params,B=Y,I=Object(c["a"])(V);try{for(I.s();!(H=I.n()).done;)G=H.value,B=B.replace("?",JSON.stringify(G))}catch(J){I.e(J)}finally{I.f()}n.results[e.name].sql=B}n.results[e.name].rows=D.data.rows,n.results[e.name].block_idx=t,n.results[e.name].delay=A-M,n.current_block=e,void 0!==(null===(p=e.tabOptions)||void 0===p?void 0:p.autoload)&&"false"!=String(null===(m=e.tabOptions)||void 0===m?void 0:m.autoload)&&n.open_tabOptions(e.tabOptions,(+e.tabOptions.autoload||1)-1);case 60:case"end":return a.stop()}}),a)}))(),"t0",11);case 11:if(p=s.t0,"object"!==Object(o["a"])(p)){s.next=14;break}return s.abrupt("return",p.v);case 14:s.next=20;break;case 16:s.prev=16,s.t1=s["catch"](9),console.log(s.t1),alert(s.t1.message);case 20:return s.prev=20,e&&n.results[e.name]&&(n.results[e.name].loading=!1),clearTimeout(u),e.fetching=!1,s.finish(20);case 25:case"end":return s.stop()}}),s,null,[[9,16,20,25]])})))()},get_http_result:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o,r,i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(">>>get_http_result"),"http"==e.type){n.next=3;break}return n.abrupt("return",console.log("non http block request canceled."));case 3:if(e.axios){n.next=5;break}return n.abrupt("return",console.log("http block axios empty; canceled."));case 5:if(s=a.get_state_params(),s.length){o={},r=Object(c["a"])(s);try{for(r.s();!(i=r.n()).done;)l=i.value,o[l.key]=String(l.value||"")}catch(u){r.e(u)}finally{r.f()}a.$router.push({query:o}).catch((function(){console.log("params not changed. let's reload."),a.apply_hash_params()}))}else a._get_http_result(e,t);case 7:case"end":return n.stop()}}),n)})))()},_get_http_result:function(e,t,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o,r,i,u,p,m,b,f,h,_,v,g,k,w,y,x,j,O,C,$,S,R,q,E,P,T,L,M,D,A;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,"http"==e.type){s.next=3;break}return s.abrupt("return",console.log("non http block request canceled."));case 3:if("GET"==String((null===e||void 0===e||null===(o=e.axios)||void 0===o?void 0:o.methodType)||(null===e||void 0===e||null===(r=e.axios)||void 0===r?void 0:r.method)).toUpperCase()){s.next=5;break}return s.abrupt("return",console.log("non GET http block request canceled."));case 5:if(n.http_loading[t]=!0,n.http_loading=Object(l["a"])(n.http_loading),"gsheet"!=a){s.next=27;break}return n.gsheet_loading[t]=!0,n.gsheet_loading=Object(l["a"])(n.gsheet_loading),s.next=12,n.$http.get("/api/connect/google/spreadsheet/refresh");case 12:if(h=s.sent,!("not connected"==(null===h||void 0===h||null===(p=h.data)||void 0===p?void 0:p.message)||null!==h&&void 0!==h&&null!==(m=h.data)&&void 0!==m&&m.message.includes("invalid_grant"))){s.next=25;break}return s.next=16,n.$http.get("/api/connect/google/spreadsheet");case 16:if(g=s.sent,"ok"==(null===g||void 0===g||null===(_=g.data)||void 0===_?void 0:_.message)){s.next=19;break}throw new Error((null===g||void 0===g||null===(v=g.data)||void 0===v?void 0:v.message)||"연결된 구글시트 계정이 없음");case 19:return k=500,w=670,y=window.top.outerHeight/2+window.top.screenY-w/2,x=window.top.outerWidth/2+window.top.screenX-k/2,window.open(g.data.url,"YSG_GoogleSheetStep1","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(k,", height=").concat(w,", top=").concat(y,", left=").concat(x)),s.abrupt("return");case 25:if("ok"==(null===h||void 0===h||null===(b=h.data)||void 0===b?void 0:b.message)){s.next=27;break}throw new Error((null===h||void 0===h||null===(f=h.data)||void 0===f?void 0:f.message)||"구글연동 확인 실패");case 27:if(j=e.params,n.page.params){if(O=Object.assign({},n.state_params||{}),e.params){C=Object(c["a"])(e.params);try{for(C.s();!($=C.n()).done;)S=$.value,O[S.key]||(O[S.key]=Object.assign({},S))}catch(N){C.e(N)}finally{C.f()}}R=Object(c["a"])(n.page.params);try{for(R.s();!(q=R.n()).done;)E=q.value,O[E.key]||(O[E.key]=Object.assign({},E)),O[E.key].value=E.value}catch(N){R.e(N)}finally{R.f()}j=Object.values(O)}return P=Date.now(),s.next=32,n.$http.post("/api/block/http",{fields:j},{params:{path:"".concat(n.path,".blocks.").concat(t),block_idx:t,admin_domain:n.admin_domain,response_type:a}});case 32:if(T=s.sent,L=Date.now(),n.http_loading[t]=!1,n.http_loading=Object(l["a"])(n.http_loading),"ok"==(null===(i=T.data)||void 0===i?void 0:i.message)){s.next=41;break}return n.error=null===(M=T.data)||void 0===M?void 0:M.error,s.abrupt("return");case 41:n.error={};case 42:if(null===T||void 0===T||null===(u=T.data)||void 0===u||!u.spreadsheetUrl){s.next=47;break}return window.open(T.data.spreadsheetUrl),n.gsheet_loading[t]=!1,n.gsheet_loading=Object(l["a"])(n.gsheet_loading),s.abrupt("return");case 47:n.results[e.name]||(n.results[e.name]={name:e.name,cols:[],rows:[]}),e.responseTransformation&&(D=new Function("row",e.responseTransformation),T.data.rows=T.data.rows.map((function(e){return D(e)}))),T.data.rows.length>0&&(A=Object.keys(T.data.rows[0]).map((function(e){var t=T.data.rows[0][e],a=void 0;return null===t?a="text":Object(d["isObject"])(t)?a="json":isFinite(+t)?a="number":!0!==t&&!1!==t||(a="boolean"),{label:e,field:e,type:a}})),e.viewModal&&A.push({label:"조회",field:"__조회__",sortable:!1,globalSearchDisabled:!0,width:"100px"}),e.editModal&&A.push({label:"수정",field:"__수정__",sortable:!1,globalSearchDisabled:!0,width:"100px"}),n.results[e.name].cols=A),n.results[e.name].rows=T.data.rows,n.results[e.name].block_idx=t,n.results[e.name].block=e,n.results[e.name].delay=L-P,n.current_block=e,s.next=60;break;case 57:s.prev=57,s.t0=s["catch"](0),console.log(s.t0);case 60:case"end":return s.stop()}}),s,null,[[0,57]])})))()},get_http_update:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o,r,i,u,d,p,m,b,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("http"==e.type){n.next=2;break}return n.abrupt("return",console.log("non http block request; canceled."));case 2:if(confirm("실행하시겠습니까?")){n.next=4;break}return n.abrupt("return",!1);case 4:n.prev=4,o=Object(c["a"])(e.params);try{for(o.s();!(r=o.n()).done;)i=r.value,i.valueFromRow&&(u="true"==String(i.valueFromRow)?i.key:i.valueFromRow,a.$set(i,"value",a.row_json[u]))}catch(h){o.e(h)}finally{o.f()}return d={},d.path="".concat(a.path,".blocks.").concat(t),d.admin_domain=a.admin_domain,a.http_loading[t]=!0,a.http_loading=Object(l["a"])(a.http_loading),p=Date.now(),n.next=15,a.$http.post("/api/block/http",{fields:e.params},{params:d});case 15:if(m=n.sent,b=Date.now(),a.http_loading[t]=!1,a.http_loading=Object(l["a"])(a.http_loading),"ok"==(null===(s=m.data)||void 0===s?void 0:s.message)){n.next=24;break}return a.error=null===(f=m.data)||void 0===f?void 0:f.error,n.abrupt("return");case 24:a.error={};case 25:a.$set(e,"update_result",m.data.rows),a.$set(e,"delay",b-p),n.next=32;break;case 29:n.prev=29,n.t0=n["catch"](4),console.log(n.t0);case 32:case"end":return n.stop()}}),n,null,[[4,29]])})))()},open_modal:function(e,t,a){var n=this.page.blocks[t].viewModal,s={name:"modal2",transition:"none",class:"p-4",width:n.width,height:"auto",shiftX:n.shiftX,shiftY:n.shiftY,clickToClose:"false"!=String(n.dismissible),scrollable:!0};this.$modal.show(g,{path:"".concat(this.path,".blocks.").concat(t),block:this.page.blocks[t],page:this.page,depth:2,row:Object.assign({},e,{"__조회__":void 0,"__수정__":void 0}),row_json:a,admin_domain:this.admin_domain},s)},edit_modal:function(e,t){this.$modal.show(EditModal,{path:"".concat(this.path,".blocks.").concat(t),block:this.page.blocks[t],page:this.page,depth:2,row:Object.assign({},e,{"__조회__":void 0,"__수정__":void 0}),admin_domain:this.admin_domain},{scrollable:!0,height:"auto",transition:"none",name:"modal2"})},load:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},A=D,N=(a("39e6"),Object(_["a"])(A,n,s,!1,null,"75cb6bd2",null));t["default"]=N.exports},"9d5a":function(e,t,a){"use strict";a("5d83")},ae59:function(e,t,a){},d19a:function(e,t,a){},e95c:function(e,t,a){},f653:function(e,t,a){},f878:function(e,t,a){}});
//# sourceMappingURL=app.6be93991.js.map